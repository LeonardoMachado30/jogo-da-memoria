import{Q as O}from"./QPage-CY3etpD6.js";import{d as S,r as k,w as v,c as H,H as P,O as x,G as s,L as R,S as J,U as W,V as K,D as b,E as C,W as G,f as y,Q as E,C as Q,I as X,J as l,K as h,X as j,o as Y,Y as Z,F as ee,Z as te,$ as ae}from"./index-DTkwynAG.js";import{u as B,f as q,a as le,i as oe}from"./game-store-ZfgplFpl.js";import{a as F}from"./user-store-CxZoKIGm.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{Q as A}from"./QImg-BAMuYvRb.js";import{d as se,e as ne,_ as z}from"./ModalDefault.vue_vue_type_script_setup_true_lang-CV1zfdr0.js";import"./firebase-CQMMWI7J.js";const re={class:"card-inner"},ie={class:"card-face card-front"},ue=["src","alt"],de=S({__name:"CardIndex",props:{card:{},index:{},flippedExternally:{type:Boolean},locked:{type:Boolean}},emits:["flip"],setup(t,{expose:e,emit:a}){const o=t,p=a,{audioCard:u}=F(),d=k(!1);v(()=>o.flippedExternally,w=>{d.value=w},{immediate:!0});const c=H(()=>d.value?"flip-up":"flip-down");function _(){o.locked||d.value||(d.value=!0,u(),p("flip",{index:o.index,alt:o.card.alt}))}return e({flipDown:()=>{u(),d.value=!1}}),(w,f)=>(x(),P("div",{class:R(["card-container",c.value]),onClick:_,style:{"min-height":"60px","min-width":"60px"}},[s("div",re,[f[0]||(f[0]=s("div",{class:"card-face card-back"},null,-1)),s("div",ie,[s("img",{src:o.card.src,alt:o.card.alt,class:"card-img full-width full-height",loading:"lazy"},null,8,ue)])])],2))}}),ce=U(de,[["__scopeId","data-v-176e0442"]]);function D(t){if(t===!1)return 0;if(t===!0||t===void 0)return 1;const e=parseInt(t,10);return isNaN(e)?0:e}const L=J({name:"close-popup",beforeMount(t,{value:e}){const a={depth:D(e),handler(o){a.depth!==0&&setTimeout(()=>{const p=se(t);p!==void 0&&ne(p,o,a.depth)})},handlerKey(o){W(o,13)===!0&&a.handler(o)}};t.__qclosepopup=a,t.addEventListener("click",a.handler),t.addEventListener("keyup",a.handlerKey)},updated(t,{value:e,oldValue:a}){e!==a&&(t.__qclosepopup.depth=D(e))},beforeUnmount(t){const e=t.__qclosepopup;t.removeEventListener("click",e.handler),t.removeEventListener("keyup",e.handlerKey),delete t.__qclosepopup}}),pe=S({__name:"ModalFailedGame",props:{modelValue:{default:!1},modelModifiers:{}},emits:["update:modelValue"],setup(t){const e=K(t,"modelValue"),{audioGameOver:a,audioCongratulation:o}=F(),p=B();function u(){o().pause(),p.startGameEffects()}return v(e,d=>{d&&a()},{immediate:!0}),(d,c)=>(x(),b(z,{modelValue:e.value,"onUpdate:modelValue":c[0]||(c[0]=_=>e.value=_),"class-body":"flex column items-center text-center q-px-lg","class-actions":"flex justify-center q-pa-lg"},{default:C(()=>[y(A,{srcset:"failedGame.gif",alt:"Happy Birthday",width:"140",height:"140",class:"full-width full-height",style:{"max-width":"140px","max-height":"140px"}}),c[1]||(c[1]=s("p",{class:"text-h4 text-bold text-red-8"},"Você falhou!",-1)),c[2]||(c[2]=s("p",{class:"text-body2 text-bold text-principal"}," Mas não desanime, você pode tentar novamente! ",-1))]),actions:C(()=>[G(y(E,{label:"menu principal",color:"cyan-6",to:"/"},null,512),[[L]]),G(y(E,{label:"jogar novamente",color:"amber-7",onClick:u},null,512),[[L]])]),_:1},8,["modelValue"]))}}),me={class:"text-h5 text-bold text-principal q-px-lg"},fe={class:"flex justify-center gap-4"},ve=S({__name:"ModalNextLevel",props:{showModal:{default:!1},showModalModifiers:{}},emits:["update:showModal"],setup(t){const e=K(t,"showModal"),{audioCongratulation:a}=F(),o=B(),{currentScore:p,currentLevel:u,attemptCounter:d,gameEndTime:c,gameStartTime:_}=Q(o);function w(){a().pause(),o.startGameEffects()}function f(){a().pause(),u.value=u.value+1,o.startGameEffects()}return v(e,V=>{V&&a()}),(V,r)=>(x(),b(z,{modelValue:e.value,"onUpdate:modelValue":r[0]||(r[0]=M=>e.value=M),title:"",icon:"","class-body":"flex column items-center text-center q-px-lg","class-actions":"flex justify-center q-pa-lg"},{default:C(()=>[y(A,{srcset:"happy_birthday.gif",alt:"Happy Birthday",width:"360",height:"360",class:"full-width full-height",style:{"max-width":"250px","max-height":"250px"}}),r[3]||(r[3]=s("p",{class:"text-h4 text-bold text-principal"},"Parabéns!",-1)),s("p",me," Você conquistou o nível "+h(l(u)),1),s("div",fe,[s("p",null,"Pontuação: "+h(l(p)),1),r[1]||(r[1]=j(" - ")),s("p",null,"Tentivas: "+h(l(d)),1),r[2]||(r[2]=j(" - ")),s("p",null,"Tempo total: "+h(l(o).gameTimeConvertForMinutes(l(_),l(c))),1)])]),actions:C(()=>[G(y(E,{label:"Jogar novamente",color:"amber-7","text-color":"black",onClick:w},null,512),[[L]]),l(u)<3?G((x(),b(E,{key:0,label:"Proximo Nivel",color:"cyan-6",onClick:f},null,512)),[[L]]):X("",!0)]),_:1},8,["modelValue"]))}}),xe={class:"flex justify-between text-principal q-pt-md"},he=S({__name:"StartGamePage",setup(t){const e=B(),{initialFlip:a,currentScore:o,gridSize:p,levelCardSet:u,currentLevel:d,totalCards:c,lockBoard:_,attemptCounter:w,flippedStatus:f,cardRefs:V}=Q(e),r=k(!1),M=k(!1),I=k(0),T=k(!1);function N(i){const n=[...i];for(let m=n.length-1;m>0;m--){const g=Math.floor(Math.random()*(m+1));[n[m],n[g]]=[n[g],n[m]]}return n}const $=k(N([...u.value]));return v(q,i=>{e.pulseTimerList.forEach(n=>{i===n&&(M.value=!0,setTimeout(()=>{M.value=!1},2e3))})}),v(u,i=>{$.value=N([...i]),f.value.splice(0,f.value.length,...Array(i.length).fill(!1))}),v(()=>f.value,async i=>{i.every(n=>n)&&(r.value=!0,await e.endGame())},{deep:!0}),v(a,i=>{if(i){const n=setInterval(()=>{I.value++},600);setTimeout(()=>{clearInterval(n)},5e3)}}),v(oe,i=>{i&&!r.value&&(T.value=!T.value)}),Y(()=>{e.startGameEffects()}),(i,n)=>(x(),b(O,{class:"--container"},{default:C(()=>[s("section",null,[s("div",{class:"--grid",style:Z({gridTemplateColumns:`repeat(${l(p)}, minmax(20px, 1fr))`})},[(x(!0),P(ee,null,te(l(c),(m,g)=>(x(),b(ce,{key:g,index:g,card:$.value[g]??{src:"",alt:""},"flipped-externally":l(a)||l(f)[g],locked:l(_),onFlip:l(e).onFlip,ref_for:!0,ref_key:"cardRefs",ref:V},null,8,["index","card","flipped-externally","locked","onFlip"]))),128))],4),s("div",xe,[s("p",null,"Nivel: "+h(l(d)),1),s("p",null,"Pontuação: "+h(l(o)),1),s("p",null,"Tentativas: "+h(l(w)),1),y(ae,{name:"time-pulse",mode:"out-in"},{default:C(()=>[(x(),P("p",{key:l(a)?"pulse-"+I.value:l(q),class:"text-bold"},h(l(a)?l(le):l(q)),1))]),_:1})])]),y(ve,{showModal:r.value,"onUpdate:showModal":n[0]||(n[0]=m=>r.value=m)},null,8,["showModal"]),y(pe,{modelValue:T.value,"onUpdate:modelValue":n[1]||(n[1]=m=>T.value=m)},null,8,["modelValue"])]),_:1}))}}),Me=U(he,[["__scopeId","data-v-2540617e"]]);export{Me as default};
