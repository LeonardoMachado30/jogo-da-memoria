import{Q as z}from"./QPage-DErC9Mi3.js";import{d as S,r as b,w as x,c as O,H as P,O as h,G as s,L as H,S as R,U as J,V as D,D as C,E as k,W as E,f as _,Q as T,C as K,I as W,J as l,K as v,o as X,X as Y,F as Z,Y as ee,Z as te}from"./index-DiZnF12B.js";import{u as B,f as q,a as ae,i as le}from"./game-store-CcGt-29e.js";import{a as F}from"./user-store-DTngdh2-.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{Q as U}from"./QImg-DgdgdcuE.js";import{d as oe,e as se,_ as A}from"./ModalDefault.vue_vue_type_script_setup_true_lang-DMgQ78lG.js";import"./firebase-Bd6m_IFo.js";const ne={class:"card-inner"},re={class:"card-face card-front"},ie=["src","alt"],ue=S({__name:"CardIndex",props:{card:{},index:{},flippedExternally:{type:Boolean},locked:{type:Boolean}},emits:["flip"],setup(t,{expose:e,emit:a}){const o=t,c=a,{audioCard:i}=F(),u=b(!1);x(()=>o.flippedExternally,w=>{u.value=w},{immediate:!0});const d=O(()=>u.value?"flip-up":"flip-down");function y(){o.locked||u.value||(u.value=!0,i(),c("flip",{index:o.index,alt:o.card.alt}))}return e({flipDown:()=>{i(),u.value=!1}}),(w,m)=>(h(),P("div",{class:H(["card-container",d.value]),onClick:y,style:{"min-height":"60px","min-width":"60px"}},[s("div",ne,[m[0]||(m[0]=s("div",{class:"card-face card-back"},null,-1)),s("div",re,[s("img",{src:o.card.src,alt:o.card.alt,class:"card-img full-width full-height",loading:"lazy"},null,8,ie)])])],2))}}),de=Q(ue,[["__scopeId","data-v-22b16673"]]);function j(t){if(t===!1)return 0;if(t===!0||t===void 0)return 1;const e=parseInt(t,10);return isNaN(e)?0:e}const L=R({name:"close-popup",beforeMount(t,{value:e}){const a={depth:j(e),handler(o){a.depth!==0&&setTimeout(()=>{const c=oe(t);c!==void 0&&se(c,o,a.depth)})},handlerKey(o){J(o,13)===!0&&a.handler(o)}};t.__qclosepopup=a,t.addEventListener("click",a.handler),t.addEventListener("keyup",a.handlerKey)},updated(t,{value:e,oldValue:a}){e!==a&&(t.__qclosepopup.depth=j(e))},beforeUnmount(t){const e=t.__qclosepopup;t.removeEventListener("click",e.handler),t.removeEventListener("keyup",e.handlerKey),delete t.__qclosepopup}}),ce=S({__name:"ModalFailedGame",props:{modelValue:{default:!1},modelModifiers:{}},emits:["update:modelValue"],setup(t){const e=D(t,"modelValue"),{audioGameOver:a,audioCongratulation:o}=F(),c=B();function i(){o().pause(),c.startGameEffects()}return x(e,u=>{u&&a()},{immediate:!0}),(u,d)=>(h(),C(A,{modelValue:e.value,"onUpdate:modelValue":d[0]||(d[0]=y=>e.value=y),"class-body":"flex column items-center text-center q-px-lg","class-actions":"flex justify-center q-pa-lg"},{default:k(()=>[_(U,{srcset:"failedGame.gif",alt:"Happy Birthday",width:"140",height:"140",class:"full-width full-height",style:{"max-width":"140px","max-height":"140px"}}),d[1]||(d[1]=s("p",{class:"text-h4 text-bold text-red-8"},"Você falhou!",-1)),d[2]||(d[2]=s("p",{class:"text-body2 text-bold text-principal"}," Mas não desanime, você pode tentar novamente! ",-1))]),actions:k(()=>[E(_(T,{label:"menu principal",color:"cyan-6",to:"/"},null,512),[[L]]),E(_(T,{label:"jogar novamente",color:"amber-7",onClick:i},null,512),[[L]])]),_:1},8,["modelValue"]))}}),pe={class:"text-h5 text-bold text-principal q-px-lg"},me={class:"flex justify-center",style:{gap:"10px"}},fe=S({__name:"ModalNextLevel",props:{showModal:{default:!1},showModalModifiers:{}},emits:["update:showModal"],setup(t){const e=D(t,"showModal"),{audioCongratulation:a}=F(),o=B(),{currentScore:c,currentLevel:i,attemptCounter:u,gameEndTime:d,gameStartTime:y}=K(o);function w(){a().pause(),o.startGameEffects()}function m(){a().pause(),i.value=i.value+1,o.startGameEffects()}return x(e,V=>{V&&a()}),(V,f)=>(h(),C(A,{modelValue:e.value,"onUpdate:modelValue":f[0]||(f[0]=M=>e.value=M),title:"",icon:"","class-body":"flex column items-center text-center q-px-lg","class-actions":"flex justify-center q-pa-lg"},{default:k(()=>[_(U,{srcset:"happy_birthday.gif",alt:"Happy Birthday",width:"360",height:"360",class:"full-width full-height",style:{"max-width":"250px","max-height":"250px"}}),f[1]||(f[1]=s("p",{class:"text-h4 text-bold text-principal"},"Parabéns!",-1)),s("p",pe," Você conquistou o nível "+v(l(i)),1),s("div",me,[s("p",null,"Pontuação: "+v(l(c)),1),s("p",null,"Tentivas: "+v(l(u)),1),s("p",null,"inicio: "+v(l(y)),1),s("p",null,"fim: "+v(l(d)),1)])]),actions:k(()=>[E(_(T,{label:"Jogar novamente",color:"amber-7","text-color":"black",onClick:w},null,512),[[L]]),l(i)<3?E((h(),C(T,{key:0,label:"Proximo Nivel",color:"cyan-6",onClick:m},null,512)),[[L]]):W("",!0)]),_:1},8,["modelValue"]))}}),ve={class:"flex justify-between text-principal q-pt-md"},xe=S({__name:"StartGamePage",setup(t){const e=B(),{initialFlip:a,currentScore:o,gridSize:c,levelCardSet:i,currentLevel:u,totalCards:d,lockBoard:y,attemptCounter:w,flippedStatus:m,cardRefs:V}=K(e),f=b(!1),M=b(!1),I=b(0),G=b(!1);function N(r){const n=[...r];for(let p=n.length-1;p>0;p--){const g=Math.floor(Math.random()*(p+1));[n[p],n[g]]=[n[g],n[p]]}return n}const $=b(N([...i.value]));return x(q,r=>{e.pulseTimerList.forEach(n=>{r===n&&(M.value=!0,setTimeout(()=>{M.value=!1},2e3))})}),x(i,r=>{$.value=N([...r]),m.value.splice(0,m.value.length,...Array(r.length).fill(!1))}),x(()=>m.value,async r=>{r.every(n=>n)&&(f.value=!0,await e.endGame())},{deep:!0}),x(a,r=>{if(r){const n=setInterval(()=>{I.value++},600);setTimeout(()=>{clearInterval(n)},5e3)}}),x(le,r=>{r&&!f.value&&(G.value=!G.value)}),X(()=>{e.startGameEffects()}),(r,n)=>(h(),C(z,{class:"--container"},{default:k(()=>[s("section",null,[s("div",{class:"--grid",style:Y({gridTemplateColumns:`repeat(${l(c)}, minmax(20px, 1fr))`})},[(h(!0),P(Z,null,ee(l(d),(p,g)=>(h(),C(de,{key:g,index:g,card:$.value[g]??{src:"",alt:""},"flipped-externally":l(a)||l(m)[g],locked:l(y),onFlip:l(e).onFlip,ref_for:!0,ref_key:"cardRefs",ref:V},null,8,["index","card","flipped-externally","locked","onFlip"]))),128))],4),s("div",ve,[s("p",null,"Nivel: "+v(l(u)),1),s("p",null,"Pontuação: "+v(l(o)),1),s("p",null,"Tentativas: "+v(l(w)),1),_(te,{name:"time-pulse",mode:"out-in"},{default:k(()=>[(h(),P("p",{key:l(a)?"pulse-"+I.value:l(q),class:"text-bold"},v(l(a)?l(ae):l(q)),1))]),_:1})])]),_(fe,{showModal:f.value,"onUpdate:showModal":n[0]||(n[0]=p=>f.value=p)},null,8,["showModal"]),_(ce,{modelValue:G.value,"onUpdate:modelValue":n[1]||(n[1]=p=>G.value=p)},null,8,["modelValue"])]),_:1}))}}),Ve=Q(xe,[["__scopeId","data-v-31ed396c"]]);export{Ve as default};
