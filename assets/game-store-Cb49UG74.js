import{l as x,g as F,a as d,t as i,c as l,h as L,u as _,x as k,r as v,a6 as I}from"./index-Pjm4lc43.js";import{a as $}from"./QBtn-Dj69JY2W.js";import{d as g,u as B}from"./ModalDefault.vue_vue_type_script_setup_true_lang-D-wWuKBG.js";const D=x({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:a}){const{proxy:{$q:t}}=F(),r=d(_,i);if(r===i)return console.error("QPage needs to be a deep child of QLayout"),i;if(d(k,i)===i)return console.error("QPage needs to be child of QPageContainer"),i;const T=l(()=>{const n=(r.header.space===!0?r.header.size:0)+(r.footer.space===!0?r.footer.size:0);if(typeof e.styleFn=="function"){const y=r.isContainer.value===!0?r.containerHeight.value:t.screen.height;return e.styleFn(n,y)}return{minHeight:r.isContainer.value===!0?r.containerHeight.value-n+"px":t.screen.height===0?n!==0?`calc(100vh - ${n}px)`:"100vh":t.screen.height-n+"px"}}),b=l(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>L("main",{class:b.value,style:T.value},$(a.default))}}),P=(e,a)=>{const t=e.__vccOpts||e;for(const[r,f]of a)t[r]=f;return t},h=60,S=5,s=v(h),c=v(S),j=l(()=>{const e=Math.floor(s.value/60),a=s.value%60;return`${String(e).padStart(2,"0")}:${String(a).padStart(2,"0")}`}),R=l(()=>{const e=c.value%60;return`${String(e).padStart(2,"0")}`}),w=l(()=>s.value<=0);let o=null,u=null;const p=()=>{clearInterval(o),s.value=h},C=()=>{clearInterval(u),c.value=S};function m(){return{mounted:()=>{p(),o=setInterval(()=>{s.value>=0?s.value--:clearInterval(o)},1e3)},mountedStart:()=>{C(),u=setInterval(()=>{c.value>0?c.value--:clearInterval(u)},1e3)},unmounted:()=>{clearInterval(o),clearInterval(u)},isTimeOver:w}}const A=I("game",{state:()=>({currentScore:0,pulseTimerList:["01:30","01:00","00:30"],attemptCounter:0,currentLevel:1,gameStartTime:null,gameEndTime:null,initialFlip:!1,lockBoard:!1,flippedStatus:[],flippedCards:[],cardRefs:[],baseFruits:[{src:"fruits/abacaxi.png",alt:"abacaxi"},{src:"fruits/banana.png",alt:"banana"},{src:"fruits/beterraba.png",alt:"beterraba"},{src:"fruits/carambola.png",alt:"carambola"},{src:"fruits/cereja.png",alt:"cereja"},{src:"fruits/kiwi.png",alt:"kiwi"},{src:"fruits/laranja.png",alt:"laranja"},{src:"fruits/limao.png",alt:"limao"},{src:"fruits/manga.png",alt:"manga"},{src:"fruits/melancia.png",alt:"melancia"},{src:"fruits/mixirica.png",alt:"mixirica"},{src:"fruits/morango.png",alt:"morango"},{src:"fruits/pera.png",alt:"pera"},{src:"fruits/pessego.png",alt:"pessego"},{src:"fruits/pitaia.png",alt:"pitaia"},{src:"fruits/tamarindo.png",alt:"tamarindo"},{src:"fruits/uva.png",alt:"uva"},{src:"fruits/uva_roxa.png",alt:"uva roxa"},{src:"fruits/uva_verde.png",alt:"uva verde"},{src:"fruits/jabuticaba.png",alt:"jabuticaba"},{src:"fruits/maca_verde.png",alt:"maca_verde"},{src:"fruits/melancia_cortada.png",alt:"melancia cortada"},{src:"fruits/goiaba.png",alt:"goiaba cortada"},{src:"fruits/lichia.png",alt:"lichia"}],levelsConfig:[{level:1,gridSize:4,pairs:8},{level:2,gridSize:6,pairs:18},{level:3,gridSize:8,pairs:24}]}),getters:{currentConfig(e){return e.levelsConfig.find(t=>t.level===e.currentLevel)??e.levelsConfig[0]},gridSize(e){return e.levelsConfig.find(a=>a.level===e.currentLevel)?.gridSize||4},totalCards(e){return(e.levelsConfig.find(t=>t.level===e.currentLevel)?.pairs||8)*2},levelCardSet(e){const a=e.levelsConfig.find(r=>r.level===e.currentLevel)?.pairs||8,t=e.baseFruits.slice(0,a);return[...t,...t]},gameDuration(e){return e.gameStartTime!==null&&e.gameEndTime!==null?e.gameEndTime-e.gameStartTime:null}},actions:{startGameEffects(){const{audioCard:e,playMusic:a}=g();a(),this.resetLevel(),this.initialFlip=!1,this.lockBoard=!0,setTimeout(()=>{this.gameStartTime=Date.now(),e(),this.initialFlip=!0,m().mountedStart(),setTimeout(()=>{e(),this.initialFlip=!1,m().mounted(),this.lockBoard=!1},5e3)},600)},async endGame(){const e=B();this.gameEndTime=Date.now(),e.getUser?.uid&&await e.updateRanking(e.getUser.uid,{score:this.currentScore,gameTotal:this.gameDuration,attemptCounter:this.attemptCounter,...e.getUser})},incrementScore(e){const a=this.calculateScore(e);this.currentScore+=a},calculateScore(e){return e>="00:50"?5:e>="00:40"?4:e>="00:30"?3:e>="00:20"?2:e>="00:05"?1:0},resetLevel(){this.currentScore=0,this.attemptCounter=0,this.currentScore=0,p(),C(),this.setFlippedStatus()},setFlippedStatus(){this.flippedStatus=Array(this.totalCards).fill(!1)},onFlip({index:e,alt:a}){if(!this.lockBoard&&(this.flippedCards.push({index:e,alt:a}),this.flippedCards.length===2)){this.attemptCounter=this.attemptCounter+1,this.lockBoard=!0;const[t,r]=this.flippedCards;t&&r&&(t.alt===r.alt?(this.flippedStatus[t.index]=!0,this.flippedStatus[r.index]=!0,this.flippedCards=[],this.lockBoard=!1,this.incrementScore(j.value),p(),g().audioPair()):setTimeout(()=>{this.cardRefs[t.index]?.flipDown(),this.cardRefs[r.index]?.flipDown(),this.flippedCards=[],this.lockBoard=!1},1e3))}}}});export{D as Q,P as _,R as a,j as f,w as i,A as u};
