import{g as F,Q as ce}from"./index-zIadHLYb.js";import{d as R,r as k,w as E,c as V,ae as B,al as v,ac as c,ad as de,aq as ue,l as me,ar as fe,as as pe,at as J,aa as $,ab as C,au as G,f as y,ag as I,y as ve,av as he,C as xe,g as ge,E as be,aw as ye,ax as _e,ay as we,h as T,ao as P,az as ke,X as Ce,aA as qe,a9 as W,o as Z,af as z,ah as s,F as ee,aB as te,aC as q,aD as D,aE as Se}from"./index-Bmr_DhBU.js";import{u as Q,f as Me,a as H,i as Ve}from"./game-store-Cb3dZPHY.js";import{a as K}from"./user-store-DOV6s33y.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{Q as ae}from"./QImg-B0QSBjR3.js";import{_ as le}from"./ModalDefault.vue_vue_type_script_setup_true_lang-Bw4RR2Mg.js";import"./firebase-DVtozInH.js";const Be={class:"card-inner"},Le={class:"card-face card-front"},Te=["src","alt"],Ee=R({__name:"CardIndex",props:{card:{},index:{},flippedExternally:{type:Boolean},locked:{type:Boolean}},emits:["flip"],setup(e,{expose:a,emit:o}){const l=e,i=o,{audioCard:h}=K(),r=k(!1);E(()=>l.flippedExternally,g=>{r.value=g},{immediate:!0});const d=V(()=>r.value?"flip-up":"flip-down");function _(){l.locked||r.value||(r.value=!0,h(),i("flip",{index:l.index,alt:l.card.alt}))}return a({flipDown:()=>{h(),r.value=!1}}),(g,f)=>(v(),B("div",{class:de(["card-container",d.value]),onClick:_,style:{border:"5px","border-color":"blue"}},[c("div",Be,[f[0]||(f[0]=c("div",{class:"card-face card-back"},null,-1)),c("div",Le,[c("img",{src:l.card.src,alt:l.card.alt,class:"card-img full-width full-height",loading:"lazy"},null,8,Te)])])],2))}}),$e=O(Ee,[["__scopeId","data-v-d34cb92b"]]);function Y(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const a=parseInt(e,10);return isNaN(a)?0:a}const N=ue({name:"close-popup",beforeMount(e,{value:a}){const o={depth:Y(a),handler(l){o.depth!==0&&setTimeout(()=>{const i=fe(e);i!==void 0&&pe(i,l,o.depth)})},handlerKey(l){me(l,13)===!0&&o.handler(l)}};e.__qclosepopup=o,e.addEventListener("click",o.handler),e.addEventListener("keyup",o.handlerKey)},updated(e,{value:a,oldValue:o}){a!==o&&(e.__qclosepopup.depth=Y(a))},beforeUnmount(e){const a=e.__qclosepopup;e.removeEventListener("click",a.handler),e.removeEventListener("keyup",a.handlerKey),delete e.__qclosepopup}}),Ge=R({__name:"ModalFailedGame",props:{modelValue:{default:!1},modelModifiers:{}},emits:["update:modelValue"],setup(e){const a=J(e,"modelValue"),{audioGameOver:o,audioCongratulation:l}=K(),i=Q();function h(){l().pause(),i.startGameEffects()}return E(a,r=>{r&&o()},{immediate:!0}),(r,d)=>(v(),$(le,{modelValue:a.value,"onUpdate:modelValue":d[0]||(d[0]=_=>a.value=_),"class-body":"flex column items-center text-center q-px-lg","class-actions":"flex justify-center q-pa-lg"},{default:C(()=>[y(ae,{srcset:"failedGame.gif",alt:"Happy Birthday",width:"140",height:"140",class:"full-width full-height",style:{"max-width":"140px","max-height":"140px"}}),d[1]||(d[1]=c("p",{class:"text-h4 text-bold text-red-8"},"Você falhou!",-1)),d[2]||(d[2]=c("p",{class:"text-body2 text-bold text-principal"}," Mas não desanime, você pode tentar novamente! ",-1))]),actions:C(()=>[G(y(I,{label:"menu principal",color:"cyan-6",to:"/"},null,512),[[N]]),G(y(I,{label:"jogar novamente",color:"amber-7",onClick:h},null,512),[[N]])]),_:1},8,["modelValue"]))}}),Ie={xs:8,sm:10,md:14,lg:20,xl:24},j=ve({name:"QChip",props:{...xe,...he,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:a,emit:o}){const{proxy:{$q:l}}=ge(),i=be(e,l),h=ye(e,Ie),r=V(()=>e.selected===!0||e.icon!==void 0),d=V(()=>e.selected===!0?e.iconSelected||l.iconSet.chip.selected:e.icon),_=V(()=>e.iconRemove||l.iconSet.chip.remove),g=V(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),f=V(()=>{const t=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(t?` text-${t} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(g.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(i.value===!0?" q-chip--dark q-dark":"")}),L=V(()=>{const t=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},u={...t,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||l.lang.label.remove};return{chip:t,remove:u}});function w(t){t.keyCode===13&&S(t)}function S(t){e.disable||(o("update:selected",!e.selected),o("click",t))}function M(t){(t.keyCode===void 0||t.keyCode===13)&&(Ce(t),e.disable===!1&&(o("update:modelValue",!1),o("remove")))}function x(){const t=[];g.value===!0&&t.push(T("div",{class:"q-focus-helper"})),r.value===!0&&t.push(T(P,{class:"q-chip__icon q-chip__icon--left",name:d.value}));const u=e.label!==void 0?[T("div",{class:"ellipsis"},[e.label])]:void 0;return t.push(T("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},ke(a.default,u))),e.iconRight&&t.push(T(P,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&t.push(T(P,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:_.value,...L.value.remove,onClick:M,onKeyup:M})),t}return()=>{if(e.modelValue===!1)return;const t={class:f.value,style:h.value};return g.value===!0&&Object.assign(t,L.value.chip,{onClick:S,onKeyup:w}),_e("div",t,x(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[we,e.ripple]])}}}),Ne={class:"full-width flex justify-center items-center q-mb-md",style:{"min-height":"120px"}},Re={key:0,class:"stars-container flex justify-center items-center"},Ae={class:"text-h5 text-bold text-principal q-px-lg q-mb-md"},Pe={class:"flex justify-center gap-2 q-mt-md flex-wrap q-px-md"},De=R({__name:"ModalNextLevel",props:qe({starsCount:{type:Number,default:3,validator:e=>e>=1&&e<=3}},{showModal:{default:!1},showModalModifiers:{}}),emits:["update:showModal"],setup(e){const a=J(e,"showModal"),o=e,{audioCongratulation:l}=K(),i=Q(),{currentScore:h,game:r,attemptCounter:d,gameEndTime:_,gameStartTime:g}=W(i),f=k([]),L=k(!0);function w(){l().pause(),i.startGameEffects()}function S(){l().pause(),r.value.currentLevel=r.value.currentLevel+1,i.startGameEffects()}function M(){setTimeout(()=>{const x=document.querySelectorAll(".star-item");if(x.length===0){console.warn("Nenhuma estrela encontrada no DOM");return}x.forEach((t,u)=>{F.timeline().fromTo(t,{opacity:0,y:-80,scale:0,rotation:-180},{opacity:1,y:u+1===2?-20:0,scale:1,rotation:0,duration:.8,delay:u*.35,ease:"back.out(2)"}).to(t,{scale:1.4,duration:.2,ease:"power2.out"}).to(t,{scale:1,duration:.2,ease:"power2.in"})})},150)}return Z(()=>{f.value=[],l(),f.value=Array.from({length:o.starsCount},(x,t)=>t+1),M()}),(x,t)=>(v(),$(le,{modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=u=>a.value=u),title:"",icon:"",classContainer:"q-pa-lg",styleContainer:"border-radius: 16px","class-body":"flex column items-center text-center","class-actions":"flex justify-center"},{default:C(()=>[c("div",Ne,[L.value?(v(),B("div",Re,[(v(!0),B(ee,null,te(f.value,u=>(v(),B("div",{key:`star-${u}`,class:"star-wrapper"},[y(ae,{src:"star.gif",alt:`Star ${u}`,class:"star-item",fit:"contain","no-spinner":""},null,8,["alt"])]))),128))])):z("",!0)]),t[1]||(t[1]=c("p",{class:"text-h4 text-bold text-principal q-mb-md"},"Parabéns!",-1)),c("p",Ae," Você conquistou o nível "+q(s(r).currentLevel),1),c("div",Pe,[y(j,{color:"cyan","text-color":"black",icon:"stars"},{default:C(()=>[D(q(s(h)),1)]),_:1}),y(j,{color:"yellow","text-color":"black",icon:"refresh"},{default:C(()=>[D(" Tentativas: "+q(s(d)),1)]),_:1}),y(j,{color:"green","text-color":"black",icon:"schedule"},{default:C(()=>[D(q(s(i).gameTimeConvertForMinutes(s(g),s(_))),1)]),_:1})])]),actions:C(()=>[G(y(I,{label:"Jogar novamente","text-color":"white",icon:"replay",onClick:w,flat:"",class:"rounded-lg full-width q-pa-lg q-mb-sm"},null,512),[[N]]),s(r).currentLevel<3?G((v(),$(I,{key:0,label:"Próximo Nível","text-color":"black",color:"white",icon:"arrow_forward",onClick:S,class:"rounded-lg full-width"},null,512)),[[N]]):z("",!0)]),_:1},8,["modelValue"]))}}),je=O(De,[["__scopeId","data-v-0b6f744d"]]),Fe={class:"flex justify-around text-blue text-weight-bolder text-body1 q-px-md q-mb-xl row"},ze={style:{"background-color":"white","border-radius":"12px",padding:"10px","box-shadow":"2px 0px 6px #000"}},Qe={style:{"background-color":"white","border-radius":"12px",padding:"10px","box-shadow":"2px 0px 6px #000"}},Ke={style:{"background-color":"white","border-radius":"12px",padding:"10px","box-shadow":"2px 0px 6px #000"}},Oe=R({__name:"StartGamePage",setup(e){const a=Q(),{initialFlip:o,currentScore:l,gridSize:i,levelCardSet:h,game:r,totalCards:d,lockBoard:_,attemptCounter:g,flippedStatus:f,cardRefs:L}=W(a),w=k(!1),S=k(!1),M=k(0),x=k(!1);function t(m){const n=[...m];for(let p=n.length-1;p>0;p--){const b=Math.floor(Math.random()*(p+1));[n[p],n[b]]=[n[b],n[p]]}return n}const u=k(t([...h.value]));return E(H,m=>{a.pulseTimerList.forEach(n=>{m===n&&(S.value=!0,setTimeout(()=>{S.value=!1},2e3))})}),E(h,m=>{u.value=t([...m]),f.value.splice(0,f.value.length,...Array(m.length).fill(!1))}),E(()=>f.value,async m=>{m.every(n=>n)&&(w.value=!0,await a.endGame())},{deep:!0}),E(Ve,m=>{m&&!w.value&&(x.value=!x.value)}),Z(()=>{setTimeout(()=>{const n=document.querySelectorAll(".card-wrapper"),p=document.querySelector(".--grid");if(!p||n.length===0)return;const b=p.getBoundingClientRect(),oe=b.width/2,ne=window.innerHeight;n.forEach((U,X)=>{const A=U.getBoundingClientRect(),se=A.left-b.left+A.width/2,re=oe-se,ie=ne-A.top;F.fromTo(U,{x:re,y:ie,rotation:F.utils.random(-45,45),scale:.3,opacity:0},{x:0,y:0,rotation:0,scale:1,opacity:1,duration:.8,delay:X*.08,ease:"back.out(1.2)",onComplete:()=>{X===n.length-1&&a.startGameEffects()}})})},200);const m=setInterval(()=>{M.value++},3e4);setTimeout(()=>{clearInterval(m)},1e4)}),(m,n)=>(v(),$(ce,{class:"--container"},{default:C(()=>[c("div",Fe,[c("p",ze," Nivel: "+q(s(r).currentLevel),1),c("p",Qe," Pontuação: "+q(s(l)),1),c("p",Ke," Tentativas: "+q(s(g)),1),(v(),B("p",{key:M.value,style:{"background-color":"white","border-radius":"12px",padding:"10px","box-shadow":"2px 0px 6px #000"}},q(s(o)?s(Me):s(H)),1))]),c("div",{class:"--grid",style:Se({gridTemplateColumns:`repeat(${s(i)}, minmax(20px, 1fr))`})},[(v(!0),B(ee,null,te(s(d),(p,b)=>(v(),B("div",{key:b,class:"card-wrapper"},[y($e,{index:b,card:u.value[b]??{src:"",alt:""},"flipped-externally":!!s(o)||!!s(f)[b],locked:s(_),onFlip:s(a).onFlip,ref_for:!0,ref_key:"cardRefs",ref:L},null,8,["index","card","flipped-externally","locked","onFlip"])]))),128))],4),w.value?(v(),$(je,{key:0,showModal:w.value,"onUpdate:showModal":n[0]||(n[0]=p=>w.value=p),"stars-count":3},null,8,["showModal"])):z("",!0),y(Ge,{modelValue:x.value,"onUpdate:modelValue":n[1]||(n[1]=p=>x.value=p)},null,8,["modelValue"])]),_:1}))}}),tt=O(Oe,[["__scopeId","data-v-24fa9ae3"]]);export{tt as default};
