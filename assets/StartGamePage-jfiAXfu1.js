import{Q as R}from"./QPage-Bvy-ApDz.js";import{d as L,r as k,w as f,c as H,H as B,O as v,G as s,L as J,S as W,U as X,V as K,D as V,E as C,W as E,f as x,Q as S,C as Q,I as Y,J as o,K as m,o as Z,X as ee,Y as te,F as ae,Z as le,$ as oe}from"./index-n20uJ8Zo.js";import{u as F,f as P,a as se,i as ne}from"./game-store-BqtCQw9_.js";import{a as I,u as re}from"./user-store-ChX5hEVp.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{Q as z}from"./QImg-9QGVXzJ-.js";import{d as ie,e as ue,_ as O}from"./ModalDefault.vue_vue_type_script_setup_true_lang-C9B4ZPYf.js";import"./firebase-BFcpTBpt.js";const de={class:"card-inner"},ce={class:"card-face card-front"},pe=["src","alt"],me=L({__name:"CardIndex",props:{card:{},index:{},flippedExternally:{type:Boolean},locked:{type:Boolean}},emits:["flip"],setup(e,{expose:t,emit:a}){const l=e,c=a,{audioCard:d}=I(),r=k(!1);f(()=>l.flippedExternally,g=>{r.value=g},{immediate:!0});const u=H(()=>r.value?"flip-up":"flip-down");function h(){l.locked||r.value||(r.value=!0,d(),c("flip",{index:l.index,alt:l.card.alt}))}return t({flipDown:()=>{d(),r.value=!1}}),(g,w)=>(v(),B("div",{class:J(["card-container",u.value]),onClick:h,style:{"min-height":"60px","min-width":"60px"}},[s("div",de,[w[0]||(w[0]=s("div",{class:"card-face card-back"},null,-1)),s("div",ce,[s("img",{src:l.card.src,alt:l.card.alt,class:"card-img full-width full-height",loading:"lazy"},null,8,pe)])])],2))}}),fe=A(me,[["__scopeId","data-v-22b16673"]]);function D(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const t=parseInt(e,10);return isNaN(t)?0:t}const T=W({name:"close-popup",beforeMount(e,{value:t}){const a={depth:D(t),handler(l){a.depth!==0&&setTimeout(()=>{const c=ie(e);c!==void 0&&ue(c,l,a.depth)})},handlerKey(l){X(l,13)===!0&&a.handler(l)}};e.__qclosepopup=a,e.addEventListener("click",a.handler),e.addEventListener("keyup",a.handlerKey)},updated(e,{value:t,oldValue:a}){t!==a&&(e.__qclosepopup.depth=D(t))},beforeUnmount(e){const t=e.__qclosepopup;e.removeEventListener("click",t.handler),e.removeEventListener("keyup",t.handlerKey),delete e.__qclosepopup}}),ve=L({__name:"ModalFailedGame",props:{modelValue:{default:!1},modelModifiers:{}},emits:["update:modelValue"],setup(e){const t=K(e,"modelValue"),{audioGameOver:a,audioCongratulation:l}=I(),c=F();function d(){l().pause(),c.startGameEffects()}return f(t,r=>{r&&a()},{immediate:!0}),(r,u)=>(v(),V(O,{modelValue:t.value,"onUpdate:modelValue":u[0]||(u[0]=h=>t.value=h),"class-body":"flex column items-center text-center q-px-lg","class-actions":"flex justify-center q-pa-lg"},{default:C(()=>[x(z,{srcset:"failedGame.gif",alt:"Happy Birthday",width:"140",height:"140",class:"full-width full-height",style:{"max-width":"140px","max-height":"140px"}}),u[1]||(u[1]=s("p",{class:"text-h4 text-bold text-red-8"},"Você falhou!",-1)),u[2]||(u[2]=s("p",{class:"text-body2 text-bold text-principal"}," Mas não desanime, você pode tentar novamente! ",-1))]),actions:C(()=>[E(x(S,{label:"menu principal",color:"cyan-6",to:"/"},null,512),[[T]]),E(x(S,{label:"jogar novamente",color:"amber-7",onClick:d},null,512),[[T]])]),_:1},8,["modelValue"]))}}),xe={class:"text-h5 text-bold text-principal q-px-lg"},he={class:"flex justify-center",style:{gap:"10px"}},ye=L({__name:"ModalNextLevel",props:{showModal:{default:!1},showModalModifiers:{}},emits:["update:showModal"],setup(e){const t=K(e,"showModal"),{audioCongratulation:a}=I(),l=F(),{currentScore:c,currentLevel:d,attemptCounter:r,gameEndTime:u,gameStartTime:h}=Q(l);function g(){a().pause(),l.startGameEffects()}function w(){a().pause(),d.value=d.value+1,l.startGameEffects()}return f(t,y=>{y&&a()}),(y,b)=>(v(),V(O,{modelValue:t.value,"onUpdate:modelValue":b[0]||(b[0]=q=>t.value=q),title:"",icon:"","class-body":"flex column items-center text-center q-px-lg","class-actions":"flex justify-center q-pa-lg"},{default:C(()=>[x(z,{srcset:"happy_birthday.gif",alt:"Happy Birthday",width:"360",height:"360",class:"full-width full-height",style:{"max-width":"250px","max-height":"250px"}}),b[1]||(b[1]=s("p",{class:"text-h4 text-bold text-principal"},"Parabéns!",-1)),s("p",xe," Você conquistou o nível "+m(o(d)),1),s("div",he,[s("p",null,"Pontuação: "+m(o(c)),1),s("p",null,"Tentivas: "+m(o(r)),1),s("p",null,"inicio: "+m(o(h)),1),s("p",null,"fim: "+m(o(u)),1)])]),actions:C(()=>[E(x(S,{label:"Jogar novamente",color:"amber-7","text-color":"black",onClick:g},null,512),[[T]]),o(d)<3?E((v(),V(S,{key:0,label:"Proximo Nivel",color:"cyan-6",onClick:w},null,512)),[[T]]):Y("",!0)]),_:1},8,["modelValue"]))}}),_e={class:"flex justify-between text-principal q-pt-md"},ge=L({__name:"StartGamePage",setup(e){const t=ee(),a=F(),{initialFlip:l,currentScore:c,gridSize:d,levelCardSet:r,currentLevel:u,totalCards:h,lockBoard:g,attemptCounter:w,flippedStatus:y,cardRefs:b}=Q(a),q=re(),M=k(!1),U=k(!1),$=k(0),G=k(!1);function N(i){const n=[...i];for(let p=n.length-1;p>0;p--){const _=Math.floor(Math.random()*(p+1));[n[p],n[_]]=[n[_],n[p]]}return n}const j=k(N([...r.value]));return f(P,i=>{a.pulseTimerList.forEach(n=>{i===n&&(U.value=!0,setTimeout(()=>{U.value=!1},2e3))})}),f(r,i=>{j.value=N([...i]),y.value.splice(0,y.value.length,...Array(i.length).fill(!1))}),f(()=>y.value,async i=>{i.every(n=>n)&&(M.value=!0,await a.endGame())},{deep:!0}),f(l,i=>{if(i){const n=setInterval(()=>{$.value++},600);setTimeout(()=>{clearInterval(n)},5e3)}}),f(ne,i=>{i&&!M.value&&(G.value=!G.value)}),Z(async()=>{q.getUser?a.startGameEffects():await t.push("/")}),(i,n)=>(v(),V(R,{class:"--container"},{default:C(()=>[s("section",null,[s("div",{class:"--grid",style:te({gridTemplateColumns:`repeat(${o(d)}, minmax(20px, 1fr))`})},[(v(!0),B(ae,null,le(o(h),(p,_)=>(v(),V(fe,{key:_,index:_,card:j.value[_]??{src:"",alt:""},"flipped-externally":o(l)||o(y)[_],locked:o(g),onFlip:o(a).onFlip,ref_for:!0,ref_key:"cardRefs",ref:b},null,8,["index","card","flipped-externally","locked","onFlip"]))),128))],4),s("div",_e,[s("p",null,"Nivel: "+m(o(u)),1),s("p",null,"Pontuação: "+m(o(c)),1),s("p",null,"Tentativas: "+m(o(w)),1),x(oe,{name:"time-pulse",mode:"out-in"},{default:C(()=>[(v(),B("p",{key:o(l)?"pulse-"+$.value:o(P),class:"text-bold"},m(o(l)?o(se):o(P)),1))]),_:1})])]),x(ye,{showModal:M.value,"onUpdate:showModal":n[0]||(n[0]=p=>M.value=p)},null,8,["showModal"]),x(ve,{modelValue:G.value,"onUpdate:modelValue":n[1]||(n[1]=p=>G.value=p)},null,8,["modelValue"])]),_:1}))}}),Se=A(ge,[["__scopeId","data-v-94e56348"]]);export{Se as default};
