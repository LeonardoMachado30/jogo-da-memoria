import{r as p,c,a0 as S}from"./index-DTkwynAG.js";import{a as m,u as z}from"./user-store-CxZoKIGm.js";const f=60,g=5,s=p(f),l=p(g),T=c(()=>{const t=Math.floor(s.value/60),e=s.value%60;return`${String(t).padStart(2,"0")}:${String(e).padStart(2,"0")}`}),k=c(()=>{const t=l.value%60;return`${String(t).padStart(2,"0")}`}),C=c(()=>s.value<=0);let a=null,n=null;const o=()=>{clearInterval(a),s.value=f},d=()=>{clearInterval(n),l.value=g};function u(){return{mounted:()=>{o(),a=setInterval(()=>{s.value>=0?s.value--:clearInterval(a)},1e3)},mountedStart:()=>{d(),n=setInterval(()=>{l.value>0?l.value--:clearInterval(n)},1e3)},unmounted:()=>{clearInterval(a),clearInterval(n)},isTimeOver:C}}const b=[{src:"fruits/abacaxi.png",alt:"abacaxi"},{src:"fruits/banana.png",alt:"banana"},{src:"fruits/beterraba.png",alt:"beterraba"},{src:"fruits/carambola.png",alt:"carambola"},{src:"fruits/cereja.png",alt:"cereja"},{src:"fruits/kiwi.png",alt:"kiwi"},{src:"fruits/laranja.png",alt:"laranja"},{src:"fruits/limao.png",alt:"limao"},{src:"fruits/manga.png",alt:"manga"},{src:"fruits/melancia.png",alt:"melancia"},{src:"fruits/mixirica.png",alt:"mixirica"},{src:"fruits/morango.png",alt:"morango"},{src:"fruits/pera.png",alt:"pera"},{src:"fruits/pessego.png",alt:"pessego"},{src:"fruits/pitaia.png",alt:"pitaia"},{src:"fruits/tamarindo.png",alt:"tamarindo"},{src:"fruits/uva.png",alt:"uva"},{src:"fruits/uva_roxa.png",alt:"uva roxa"},{src:"fruits/uva_verde.png",alt:"uva verde"},{src:"fruits/jabuticaba.png",alt:"jabuticaba"},{src:"fruits/maca_verde.png",alt:"maca_verde"},{src:"fruits/melancia_cortada.png",alt:"melancia cortada"},{src:"fruits/goiaba.png",alt:"goiaba cortada"},{src:"fruits/lichia.png",alt:"lichia"}],I=[{src:"emojis/amorzinho1.png",alt:"amorzinho1"},{src:"emojis/amorzinho2.png",alt:"amorzinho2"},{src:"emojis/amorzinho3.png",alt:"amorzinho3"},{src:"emojis/diabinho.png",alt:"diabinho"},{src:"emojis/dinheiro.png",alt:"dinheiro"},{src:"emojis/dinheiro-1.png",alt:"dinheiro-1"},{src:"emojis/feliz.png",alt:"feliz"},{src:"emojis/feliz2.png",alt:"feliz2"},{src:"emojis/feliz3.png",alt:"feliz3"},{src:"emojis/feliz4.png",alt:"feliz4"},{src:"emojis/feliz5.png",alt:"feliz5"},{src:"emojis/feliz6.png",alt:"feliz6"},{src:"emojis/feliz7.png",alt:"feliz7"},{src:"emojis/feliz8.png",alt:"feliz8"},{src:"emojis/feliz9.png",alt:"feliz9"},{src:"emojis/feliz10.png",alt:"feliz10"},{src:"emojis/feliz12.png",alt:"feliz12"},{src:"emojis/feliz13.png",alt:"feliz13"},{src:"emojis/feliz14.png",alt:"feliz14"},{src:"emojis/feliz15.png",alt:"feliz15"},{src:"emojis/feliz16.png",alt:"feliz16"},{src:"emojis/feliz17.png",alt:"feliz17"},{src:"emojis/nojinho1.png",alt:"nojinho1"},{src:"emojis/nojinho2.png",alt:"nojinho2"},{src:"emojis/raivoso1.png",alt:"raivoso1"},{src:"emojis/raivoso2.png",alt:"raivoso2"},{src:"emojis/raivoso3.png",alt:"raivoso3"},{src:"emojis/raivoso4.png",alt:"raivoso4"},{src:"emojis/raivoso5.png",alt:"raivoso5"},{src:"emojis/triste1.png",alt:"triste1"},{src:"emojis/triste2.png",alt:"triste2"},{src:"emojis/triste3.png",alt:"triste3"},{src:"emojis/triste4.png",alt:"triste4"},{src:"emojis/triste5.png",alt:"triste5"},{src:"emojis/triste6.png",alt:"triste6"},{src:"emojis/triste7.png",alt:"triste7"},{src:"emojis/triste8.png",alt:"triste8"},{src:"emojis/triste9.png",alt:"triste9"},{src:"emojis/triste10.png",alt:"triste10"},{src:"emojis/triste11.png",alt:"triste11"},{src:"emojis/triste12.png",alt:"triste12"},{src:"emojis/triste13.png",alt:"triste13"},{src:"emojis/triste14.png",alt:"triste14"},{src:"emojis/triste15.png",alt:"triste15"}];function h(t){const e=[...t];for(let i=e.length-1;i>0;i--){const r=Math.floor(Math.random()*(i+1));[e[i],e[r]]=[e[r],e[i]]}return e}const L=h(I);h(b);const E=S("game",{state:()=>({currentScore:0,pulseTimerList:["01:30","01:00","00:30"],attemptCounter:0,currentLevel:1,gameStartTime:0,gameEndTime:0,initialFlip:!1,lockBoard:!1,flippedStatus:[],flippedCards:[],cardRefs:[],randomImages:L,levelsConfig:[{level:1,gridSize:4,pairs:8},{level:2,gridSize:6,pairs:18},{level:3,gridSize:8,pairs:24}]}),getters:{currentConfig(t){return t.levelsConfig.find(i=>i.level===t.currentLevel)??t.levelsConfig[0]},gridSize(t){return t.levelsConfig.find(e=>e.level===t.currentLevel)?.gridSize||4},totalCards(t){return(t.levelsConfig.find(i=>i.level===t.currentLevel)?.pairs||8)*2},levelCardSet(t){const e=t.levelsConfig.find(r=>r.level===t.currentLevel)?.pairs||8,i=t.randomImages.slice(0,e);return[...i,...i]},gameDuration(t){return t.gameStartTime!==null&&t.gameEndTime!==null?t.gameEndTime-t.gameStartTime:null}},actions:{startGameEffects(){const{audioCard:t,playMusic:e}=m();e(),this.resetLevel(),this.initialFlip=!1,this.lockBoard=!0,setTimeout(()=>{this.gameStartTime=Date.now(),t(),this.initialFlip=!0,u().mountedStart(),setTimeout(()=>{t(),this.initialFlip=!1,u().mounted(),this.lockBoard=!1},5e3)},600)},async endGame(){const t=z();if(t.getUser){this.gameEndTime=Date.now();const e=this.gameTimeConvertForMinutes(this.gameStartTime,this.gameEndTime);t.getUser?.uid&&await t.updateRanking(t.getUser.uid,{score:this.currentScore,gameTotal:e,attemptCounter:this.attemptCounter,...t.getUser})}},incrementScore(t){const e=this.calculateScore(t);this.currentScore+=e},calculateScore(t){return t>="00:50"?5:t>="00:40"?4:t>="00:30"?3:t>="00:20"?2:t>="00:05"?1:0},resetLevel(){this.currentScore=0,this.attemptCounter=0,this.currentScore=0,o(),d(),this.setFlippedStatus()},setFlippedStatus(){this.flippedStatus=Array(this.totalCards).fill(!1)},onFlip({index:t,alt:e}){if(!this.lockBoard&&(this.flippedCards.push({index:t,alt:e}),this.flippedCards.length===2)){this.attemptCounter=this.attemptCounter+1,this.lockBoard=!0;const[i,r]=this.flippedCards;i&&r&&(i.alt===r.alt?(this.flippedStatus[i.index]=!0,this.flippedStatus[r.index]=!0,this.flippedCards=[],this.lockBoard=!1,this.incrementScore(T.value),o(),m().audioPair()):setTimeout(()=>{this.cardRefs[i.index]?.flipDown(),this.cardRefs[r.index]?.flipDown(),this.flippedCards=[],this.lockBoard=!1},1e3))}},gameTimeConvertForMinutes(t,e){const i=e-t,r=Math.floor(i/1e3),v=Math.floor(r/60),j=r%60;return`${String(v).padStart(2,"0")}:${String(j).padStart(2,"0")}`}}});export{k as a,T as f,C as i,E as u};
