import{g as F,Q as ce}from"./index-ChMZP758.js";import{d as R,r as k,w as $,c as M,S as B,_ as v,Q as c,R as de,a3 as ue,l as me,a4 as Y,O as E,P as C,a5 as G,f as y,V as I,v as pe,a6 as fe,g as ve,a7 as he,a8 as xe,a9 as be,h as T,a1 as A,aa as ge,B as ye,ab as _e,N as J,o as Z,U as Q,W as s,F as ee,ac as te,ad as q,ae as j,af as we}from"./index-DL6Now6f.js";import{u as z,f as ke,a as H,i as Ce}from"./game-store-kzlhiO-J.js";import{a as K}from"./user-store-T-P4_JI9.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{Q as ae}from"./QImg-D9_eACk-.js";import{w as qe,x as Se,_ as le,b as Ve,d as Me}from"./ModalDefault.vue_vue_type_script_setup_true_lang-C3F-xSk0.js";import"./firebase-B-_sJMYG.js";const Be={class:"card-inner"},Le={class:"card-face card-front"},Te=["src","alt"],$e=R({__name:"CardIndex",props:{card:{},index:{},flippedExternally:{type:Boolean},locked:{type:Boolean}},emits:["flip"],setup(e,{expose:a,emit:o}){const l=e,i=o,{audioCard:h}=K(),r=k(!1);$(()=>l.flippedExternally,b=>{r.value=b},{immediate:!0});const d=M(()=>r.value?"flip-up":"flip-down");function _(){l.locked||r.value||(r.value=!0,h(),i("flip",{index:l.index,alt:l.card.alt}))}return a({flipDown:()=>{h(),r.value=!1}}),(b,p)=>(v(),B("div",{class:de(["card-container",d.value]),onClick:_,style:{border:"5px","border-color":"blue"}},[c("div",Be,[p[0]||(p[0]=c("div",{class:"card-face card-back"},null,-1)),c("div",Le,[c("img",{src:l.card.src,alt:l.card.alt,class:"card-img full-width full-height",loading:"lazy"},null,8,Te)])])],2))}}),Ee=O($e,[["__scopeId","data-v-8b636b05"]]);function W(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const a=parseInt(e,10);return isNaN(a)?0:a}const N=ue({name:"close-popup",beforeMount(e,{value:a}){const o={depth:W(a),handler(l){o.depth!==0&&setTimeout(()=>{const i=qe(e);i!==void 0&&Se(i,l,o.depth)})},handlerKey(l){me(l,13)===!0&&o.handler(l)}};e.__qclosepopup=o,e.addEventListener("click",o.handler),e.addEventListener("keyup",o.handlerKey)},updated(e,{value:a,oldValue:o}){a!==o&&(e.__qclosepopup.depth=W(a))},beforeUnmount(e){const a=e.__qclosepopup;e.removeEventListener("click",a.handler),e.removeEventListener("keyup",a.handlerKey),delete e.__qclosepopup}}),Ge=R({__name:"ModalFailedGame",props:{modelValue:{default:!1},modelModifiers:{}},emits:["update:modelValue"],setup(e){const a=Y(e,"modelValue"),{audioGameOver:o,audioCongratulation:l}=K(),i=z();function h(){l().pause(),i.startGameEffects()}return $(a,r=>{r&&o()},{immediate:!0}),(r,d)=>(v(),E(le,{modelValue:a.value,"onUpdate:modelValue":d[0]||(d[0]=_=>a.value=_),"class-body":"flex column items-center text-center q-px-lg","class-actions":"flex justify-center q-pa-lg"},{default:C(()=>[y(ae,{srcset:"failedGame.gif",alt:"Happy Birthday",width:"140",height:"140",class:"full-width full-height",style:{"max-width":"140px","max-height":"140px"}}),d[1]||(d[1]=c("p",{class:"text-h4 text-bold text-red-8"},"Você falhou!",-1)),d[2]||(d[2]=c("p",{class:"text-body2 text-bold text-principal"}," Mas não desanime, você pode tentar novamente! ",-1))]),actions:C(()=>[G(y(I,{label:"menu principal",color:"cyan-6",to:"/"},null,512),[[N]]),G(y(I,{label:"jogar novamente",color:"amber-7",onClick:h},null,512),[[N]])]),_:1},8,["modelValue"]))}}),Ie={xs:8,sm:10,md:14,lg:20,xl:24},D=pe({name:"QChip",props:{...Ve,...fe,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:a,emit:o}){const{proxy:{$q:l}}=ve(),i=Me(e,l),h=he(e,Ie),r=M(()=>e.selected===!0||e.icon!==void 0),d=M(()=>e.selected===!0?e.iconSelected||l.iconSet.chip.selected:e.icon),_=M(()=>e.iconRemove||l.iconSet.chip.remove),b=M(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),p=M(()=>{const t=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(t?` text-${t} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(b.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(i.value===!0?" q-chip--dark q-dark":"")}),L=M(()=>{const t=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},u={...t,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||l.lang.label.remove};return{chip:t,remove:u}});function w(t){t.keyCode===13&&S(t)}function S(t){e.disable||(o("update:selected",!e.selected),o("click",t))}function V(t){(t.keyCode===void 0||t.keyCode===13)&&(ye(t),e.disable===!1&&(o("update:modelValue",!1),o("remove")))}function x(){const t=[];b.value===!0&&t.push(T("div",{class:"q-focus-helper"})),r.value===!0&&t.push(T(A,{class:"q-chip__icon q-chip__icon--left",name:d.value}));const u=e.label!==void 0?[T("div",{class:"ellipsis"},[e.label])]:void 0;return t.push(T("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},ge(a.default,u))),e.iconRight&&t.push(T(A,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&t.push(T(A,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:_.value,...L.value.remove,onClick:V,onKeyup:V})),t}return()=>{if(e.modelValue===!1)return;const t={class:p.value,style:h.value};return b.value===!0&&Object.assign(t,L.value.chip,{onClick:S,onKeyup:w}),xe("div",t,x(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[be,e.ripple]])}}}),Ne={class:"full-width flex justify-center items-center q-mb-md",style:{"min-height":"120px"}},Re={key:0,class:"stars-container flex justify-center items-center"},Pe={class:"text-h5 text-bold text-principal q-px-lg q-mb-md"},Ae={class:"flex justify-center gap-2 q-mt-md flex-wrap q-px-md"},je=R({__name:"ModalNextLevel",props:_e({starsCount:{type:Number,default:3,validator:e=>e>=1&&e<=3}},{showModal:{default:!1},showModalModifiers:{}}),emits:["update:showModal"],setup(e){const a=Y(e,"showModal"),o=e,{audioCongratulation:l}=K(),i=z(),{currentScore:h,game:r,attemptCounter:d,gameEndTime:_,gameStartTime:b}=J(i),p=k([]),L=k(!0);function w(){l().pause(),i.startGameEffects()}function S(){l().pause(),r.value.currentLevel=r.value.currentLevel+1,i.startGameEffects()}function V(){setTimeout(()=>{const x=document.querySelectorAll(".star-item");if(x.length===0){console.warn("Nenhuma estrela encontrada no DOM");return}x.forEach((t,u)=>{F.timeline().fromTo(t,{opacity:0,y:-80,scale:0,rotation:-180},{opacity:1,y:u+1===2?-20:0,scale:1,rotation:0,duration:.8,delay:u*.35,ease:"back.out(2)"}).to(t,{scale:1.4,duration:.2,ease:"power2.out"}).to(t,{scale:1,duration:.2,ease:"power2.in"})})},150)}return Z(()=>{p.value=[],l(),p.value=Array.from({length:o.starsCount},(x,t)=>t+1),V()}),(x,t)=>(v(),E(le,{modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=u=>a.value=u),title:"",icon:"",classContainer:"q-pa-lg",styleContainer:"border-radius: 16px","class-body":"flex column items-center text-center","class-actions":"flex justify-center"},{default:C(()=>[c("div",Ne,[L.value?(v(),B("div",Re,[(v(!0),B(ee,null,te(p.value,u=>(v(),B("div",{key:`star-${u}`,class:"star-wrapper"},[y(ae,{src:"star.gif",alt:`Star ${u}`,class:"star-item",fit:"contain","no-spinner":""},null,8,["alt"])]))),128))])):Q("",!0)]),t[1]||(t[1]=c("p",{class:"text-h4 text-bold text-principal q-mb-md"},"Parabéns!",-1)),c("p",Pe," Você conquistou o nível "+q(s(r).currentLevel),1),c("div",Ae,[y(D,{color:"cyan","text-color":"black",icon:"stars"},{default:C(()=>[j(q(s(h)),1)]),_:1}),y(D,{color:"yellow","text-color":"black",icon:"refresh"},{default:C(()=>[j(" Tentativas: "+q(s(d)),1)]),_:1}),y(D,{color:"green","text-color":"black",icon:"schedule"},{default:C(()=>[j(q(s(i).gameTimeConvertForMinutes(s(b),s(_))),1)]),_:1})])]),actions:C(()=>[G(y(I,{label:"Jogar novamente","text-color":"white",icon:"replay",onClick:w,flat:"",class:"rounded-lg full-width q-pa-lg q-mb-sm"},null,512),[[N]]),s(r).currentLevel<3?G((v(),E(I,{key:0,label:"Próximo Nível","text-color":"black",color:"white",icon:"arrow_forward",onClick:S,class:"rounded-lg full-width"},null,512)),[[N]]):Q("",!0)]),_:1},8,["modelValue"]))}}),De=O(je,[["__scopeId","data-v-0b6f744d"]]),Fe={class:"flex justify-around text-blue text-weight-bolder text-body1 q-px-md q-mb-xl row"},Qe={style:{"background-color":"white","border-radius":"12px",padding:"10px","box-shadow":"2px 0px 6px #000"}},ze={style:{"background-color":"white","border-radius":"12px",padding:"10px","box-shadow":"2px 0px 6px #000"}},Ke={style:{"background-color":"white","border-radius":"12px",padding:"10px","box-shadow":"2px 0px 6px #000"}},Oe=R({__name:"StartGamePage",setup(e){const a=z(),{initialFlip:o,currentScore:l,gridSize:i,levelCardSet:h,game:r,totalCards:d,lockBoard:_,attemptCounter:b,flippedStatus:p,cardRefs:L}=J(a),w=k(!1),S=k(!1),V=k(0),x=k(!1);function t(m){const n=[...m];for(let f=n.length-1;f>0;f--){const g=Math.floor(Math.random()*(f+1));[n[f],n[g]]=[n[g],n[f]]}return n}const u=k(t([...h.value]));return $(H,m=>{a.pulseTimerList.forEach(n=>{m===n&&(S.value=!0,setTimeout(()=>{S.value=!1},2e3))})}),$(h,m=>{u.value=t([...m]),p.value.splice(0,p.value.length,...Array(m.length).fill(!1))}),$(()=>p.value,async m=>{m.every(n=>n)&&(w.value=!0,await a.endGame())},{deep:!0}),$(Ce,m=>{m&&!w.value&&(x.value=!x.value)}),Z(()=>{setTimeout(()=>{const n=document.querySelectorAll(".card-wrapper"),f=document.querySelector(".--grid");if(!f||n.length===0)return;const g=f.getBoundingClientRect(),oe=g.width/2,ne=window.innerHeight;n.forEach((U,X)=>{const P=U.getBoundingClientRect(),se=P.left-g.left+P.width/2,re=oe-se,ie=ne-P.top;F.fromTo(U,{x:re,y:ie,rotation:F.utils.random(-45,45),scale:.3,opacity:0},{x:0,y:0,rotation:0,scale:1,opacity:1,duration:.8,delay:X*.08,ease:"back.out(1.2)",onComplete:X===n.length-1?()=>{a.startGameEffects()}:void 0})})},200);const m=setInterval(()=>{V.value++},3e4);setTimeout(()=>{clearInterval(m)},1e4)}),(m,n)=>(v(),E(ce,{class:"--container"},{default:C(()=>[c("div",Fe,[c("p",Qe," Nivel: "+q(s(r).currentLevel),1),c("p",ze," Pontuação: "+q(s(l)),1),c("p",Ke," Tentativas: "+q(s(b)),1),(v(),B("p",{key:V.value,style:{"background-color":"white","border-radius":"12px",padding:"10px","box-shadow":"2px 0px 6px #000"}},q(s(o)?s(ke):s(H)),1))]),c("div",{class:"--grid",style:we({gridTemplateColumns:`repeat(${s(i)}, minmax(20px, 1fr))`})},[(v(!0),B(ee,null,te(s(d),(f,g)=>(v(),B("div",{key:g,class:"card-wrapper"},[y(Ee,{index:g,card:u.value[g]??{src:"",alt:""},"flipped-externally":!!s(o)||!!s(p)[g],locked:s(_),onFlip:s(a).onFlip,ref_for:!0,ref_key:"cardRefs",ref:L},null,8,["index","card","flipped-externally","locked","onFlip"])]))),128))],4),w.value?(v(),E(De,{key:0,showModal:w.value,"onUpdate:showModal":n[0]||(n[0]=f=>w.value=f),"stars-count":3},null,8,["showModal"])):Q("",!0),y(Ge,{modelValue:x.value,"onUpdate:modelValue":n[1]||(n[1]=f=>x.value=f)},null,8,["modelValue"])]),_:1}))}}),tt=O(Oe,[["__scopeId","data-v-12e62956"]]);export{tt as default};
