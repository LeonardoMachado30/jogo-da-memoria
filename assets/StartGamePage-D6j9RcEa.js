import{_ as D,u as F,Q as O,f as B,a as H,i as J}from"./game-store-Cb49UG74.js";import{d as S,r as b,w as f,c as W,D as P,L as v,C as o,I as X,R as Y,a3 as Z,M as Q,A as M,B as C,a4 as E,f as x,z,E as ee,G as s,H as m,o as te,O as ae,a5 as le,F as se,N as oe,_ as ne}from"./index-Pjm4lc43.js";import{d as I,k as re,l as ie,_ as K,Q as R,u as ue}from"./ModalDefault.vue_vue_type_script_setup_true_lang-D-wWuKBG.js";import{Q as T}from"./QBtn-Dj69JY2W.js";import"./firebase-DzYlthsQ.js";const de={class:"card-inner"},ce={class:"card-face card-front"},pe=["src","alt"],me=S({__name:"CardIndex",props:{card:{},index:{},flippedExternally:{type:Boolean},locked:{type:Boolean}},emits:["flip"],setup(e,{expose:t,emit:a}){const l=e,c=a,{audioCard:d}=I(),r=b(!1);f(()=>l.flippedExternally,g=>{r.value=g},{immediate:!0});const u=W(()=>r.value?"flip-up":"flip-down");function h(){l.locked||r.value||(r.value=!0,d(),c("flip",{index:l.index,alt:l.card.alt}))}return t({flipDown:()=>{d(),r.value=!1}}),(g,w)=>(v(),P("div",{class:X(["card-container",u.value]),onClick:h,style:{"min-height":"60px","min-width":"60px"}},[o("div",de,[w[0]||(w[0]=o("div",{class:"card-face card-back"},null,-1)),o("div",ce,[o("img",{src:l.card.src,alt:l.card.alt,class:"card-img full-width full-height",loading:"lazy"},null,8,pe)])])],2))}}),fe=D(me,[["__scopeId","data-v-22b16673"]]);function A(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const t=parseInt(e,10);return isNaN(t)?0:t}const L=Y({name:"close-popup",beforeMount(e,{value:t}){const a={depth:A(t),handler(l){a.depth!==0&&setTimeout(()=>{const c=re(e);c!==void 0&&ie(c,l,a.depth)})},handlerKey(l){Z(l,13)===!0&&a.handler(l)}};e.__qclosepopup=a,e.addEventListener("click",a.handler),e.addEventListener("keyup",a.handlerKey)},updated(e,{value:t,oldValue:a}){t!==a&&(e.__qclosepopup.depth=A(t))},beforeUnmount(e){const t=e.__qclosepopup;e.removeEventListener("click",t.handler),e.removeEventListener("keyup",t.handlerKey),delete e.__qclosepopup}}),ve=S({__name:"ModalFailedGame",props:{modelValue:{default:!1},modelModifiers:{}},emits:["update:modelValue"],setup(e){const t=Q(e,"modelValue"),{audioGameOver:a,audioCongratulation:l}=I(),c=F();function d(){l().pause(),c.startGameEffects()}return f(t,r=>{r&&a()},{immediate:!0}),(r,u)=>(v(),M(K,{modelValue:t.value,"onUpdate:modelValue":u[0]||(u[0]=h=>t.value=h),"class-body":"flex column items-center text-center q-px-lg","class-actions":"flex justify-center q-pa-lg"},{default:C(()=>[x(R,{srcset:"failedGame.gif",alt:"Happy Birthday",width:"140",height:"140",class:"full-width full-height",style:{"max-width":"140px","max-height":"140px"}}),u[1]||(u[1]=o("p",{class:"text-h4 text-bold text-red-8"},"Você falhou!",-1)),u[2]||(u[2]=o("p",{class:"text-body2 text-bold text-principal"}," Mas não desanime, você pode tentar novamente! ",-1))]),actions:C(()=>[E(x(T,{label:"menu principal",color:"cyan-6",to:"/"},null,512),[[L]]),E(x(T,{label:"jogar novamente",color:"amber-7",onClick:d},null,512),[[L]])]),_:1},8,["modelValue"]))}}),xe={class:"text-h5 text-bold text-principal q-px-lg"},he={class:"flex justify-center",style:{gap:"10px"}},_e=S({__name:"ModalNextLevel",props:{showModal:{default:!1},showModalModifiers:{}},emits:["update:showModal"],setup(e){const t=Q(e,"showModal"),{audioCongratulation:a}=I(),l=F(),{currentScore:c,currentLevel:d,attemptCounter:r,gameEndTime:u,gameStartTime:h}=z(l);function g(){a().pause(),l.startGameEffects()}function w(){a().pause(),d.value=d.value+1,l.startGameEffects()}return f(t,_=>{_&&a()}),(_,k)=>(v(),M(K,{modelValue:t.value,"onUpdate:modelValue":k[0]||(k[0]=q=>t.value=q),title:"",icon:"","class-body":"flex column items-center text-center q-px-lg","class-actions":"flex justify-center q-pa-lg"},{default:C(()=>[x(R,{srcset:"happy_birthday.gif",alt:"Happy Birthday",width:"360",height:"360",class:"full-width full-height",style:{"max-width":"250px","max-height":"250px"}}),k[1]||(k[1]=o("p",{class:"text-h4 text-bold text-principal"},"Parabéns!",-1)),o("p",xe," Você conquistou o nível "+m(s(d)),1),o("div",he,[o("p",null,"Pontuação: "+m(s(c)),1),o("p",null,"Tentivas: "+m(s(r)),1),o("p",null,"inicio: "+m(s(h)),1),o("p",null,"fim: "+m(s(u)),1)])]),actions:C(()=>[E(x(T,{label:"Jogar novamente",color:"amber-7","text-color":"black",onClick:g},null,512),[[L]]),s(d)<3?E((v(),M(T,{key:0,label:"Proximo Nivel",color:"cyan-6",onClick:w},null,512)),[[L]]):ee("",!0)]),_:1},8,["modelValue"]))}}),ye={class:"flex justify-between text-principal q-pt-md"},ge=S({__name:"StartGamePage",setup(e){const t=ae(),a=F(),{initialFlip:l,currentScore:c,gridSize:d,levelCardSet:r,currentLevel:u,totalCards:h,lockBoard:g,attemptCounter:w,flippedStatus:_,cardRefs:k}=z(a),q=ue(),V=b(!1),N=b(!1),U=b(0),G=b(!1);function $(i){const n=[...i];for(let p=n.length-1;p>0;p--){const y=Math.floor(Math.random()*(p+1));[n[p],n[y]]=[n[y],n[p]]}return n}const j=b($([...r.value]));return f(B,i=>{a.pulseTimerList.forEach(n=>{i===n&&(N.value=!0,setTimeout(()=>{N.value=!1},2e3))})}),f(r,i=>{j.value=$([...i]),_.value.splice(0,_.value.length,...Array(i.length).fill(!1))}),f(()=>_.value,async i=>{i.every(n=>n)&&(V.value=!0,await a.endGame())},{deep:!0}),f(l,i=>{if(i){const n=setInterval(()=>{U.value++},600);setTimeout(()=>{clearInterval(n)},5e3)}}),f(J,i=>{i&&!V.value&&(G.value=!G.value)}),te(async()=>{q.getUser?a.startGameEffects():await t.push("/")}),(i,n)=>(v(),M(O,{class:"--container"},{default:C(()=>[o("section",null,[o("div",{class:"--grid",style:le({gridTemplateColumns:`repeat(${s(d)}, minmax(20px, 1fr))`})},[(v(!0),P(se,null,oe(s(h),(p,y)=>(v(),M(fe,{key:y,index:y,card:j.value[y]??{src:"",alt:""},"flipped-externally":s(l)||s(_)[y],locked:s(g),onFlip:s(a).onFlip,ref_for:!0,ref_key:"cardRefs",ref:k},null,8,["index","card","flipped-externally","locked","onFlip"]))),128))],4),o("div",ye,[o("p",null,"Nivel: "+m(s(u)),1),o("p",null,"Pontuação: "+m(s(c)),1),o("p",null,"Tentativas: "+m(s(w)),1),x(ne,{name:"time-pulse",mode:"out-in"},{default:C(()=>[(v(),P("p",{key:s(l)?"pulse-"+U.value:s(B),class:"text-bold"},m(s(l)?s(H):s(B)),1))]),_:1})])]),x(_e,{showModal:V.value,"onUpdate:showModal":n[0]||(n[0]=p=>V.value=p)},null,8,["showModal"]),x(ve,{modelValue:G.value,"onUpdate:modelValue":n[1]||(n[1]=p=>G.value=p)},null,8,["modelValue"])]),_:1}))}}),Ve=D(ge,[["__scopeId","data-v-94e56348"]]);export{Ve as default};
